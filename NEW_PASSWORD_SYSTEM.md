# ๐ ูุธุงู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏ
# New Password Change System

---

## โ ุชู ุงูุชุญุฏูุซ ุจูุฌุงุญ!

ุชู ุชุญุฏูุซ ูุธุงู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ููุนูู **ูุจุงุดุฑุฉ ูู ุงูุชุทุจูู** ุจุฏูู ุงูุญุงุฌุฉ ูุฅุฑุณุงู ุฑูุงุจุท ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู.

---

## ๐ฏ ููู ูุนูู ุงููุธุงู ุงูุฌุฏูุฏ

### ุงูุทุฑููุฉ ุงููุฏููุฉ โ
1. ุงููุณุชุฎุฏู ููุณู ูููุฉ ุงููุฑูุฑ
2. ูุทูุจ ุฅุฑุณุงู ุฑุงุจุท ุนุจุฑ ุงูุจุฑูุฏ
3. **ุงููุดููุฉ**: ุงูุฅูููู ูุง ูุตู ุฃู ูุณุชุบุฑู ููุชุงู ุทูููุงู
4. ููุชุญ ุงูุฑุงุจุท ููุบูุฑ ูููุฉ ุงููุฑูุฑ

### ุงูุทุฑููุฉ ุงูุฌุฏูุฏุฉ โ
1. ุงููุณุชุฎุฏู ูุถุบุท "ูุณูุช ูููุฉ ุงููุฑูุฑุ"
2. ูุชู ุชูุฌููู ูุจุงุดุฑุฉ ูุตูุญุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
3. ูุฏุฎู:
   - ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
   - ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ (ููุชุญูู ูู ูููุชู)
   - ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
   - ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ
4. ูุชู ุงูุชุบููุฑ **ููุฑุงู**
5. ูุชู ุฅุฑุณุงู ุฅูููู **ุชุฃููุฏ** ููุท (ููุณ ุฑุงุจุท)

---

## ๐ ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง/ุชุนุฏูููุง

### 1. API Endpoint ุฌุฏูุฏ
**ุงูููู**: `src/pages/api/auth/change-password.ts`

**ุงููุธููุฉ**:
- ูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู ูุณุฌู ุฏุฎูู (ูู ุฎูุงู session cookie)
- ูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู admin
- ูููู ุจุชุบููุฑ ูููุฉ ุงููุฑูุฑ ูู Firebase
- ูุนูุฏ ุงุณุชุฌุงุจุฉ ุจุงููุฌุงุญ ุฃู ุงููุดู

**ุงููุฏุฎูุงุช**:
```json
{
  "email": "admin@sabstore.com",
  "oldPassword": "old123456",
  "newPassword": "new123456"
}
```

**ุงููุฎุฑุฌุงุช**:
```json
{
  "success": true,
  "message": "ุชู ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญ"
}
```

---

### 2. ุตูุญุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
**ุงูููู**: `src/pages/admin/reset-password.tsx`

**ุงูููุฒุงุช**:
- โ ูููุฐุฌ ุจุณูุท ููุงุถุญ
- โ ุงูุชุญูู ูู ุงููููุฉ ุจุงุณุชุฎุฏุงู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
- โ ุงูุชุญูู ูู ุชุทุงุจู ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
- โ ุงูุชุญูู ูู ููุฉ ูููุฉ ุงููุฑูุฑ (6 ุฃุญุฑู ุนูู ุงูุฃูู)
- โ ุฑุณุงุฆู ุฎุทุฃ ูุงุถุญุฉ ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ
- โ ุฅุฑุณุงู ุฅูููู ุชุฃููุฏ ุจุนุฏ ุงูุชุบููุฑ ุงููุงุฌุญ
- โ ุงูุชูุฌูู ุงูุชููุงุฆู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ุจุนุฏ 3 ุซูุงูู

**ุญููู ุงููููุฐุฌ**:
1. ุงูุจุฑูุฏ ุงูุฅููุชุฑููู
2. ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
3. ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ
4. ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ

---

### 3. ุชุญุฏูุซ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
**ุงูููู**: `src/pages/admin/login.tsx`

**ุงูุชุบููุฑุงุช**:
- ุฅุฒุงูุฉ ุงููุงูุฐุฉ ุงูููุจุซูุฉ (modal) ุงููุนูุฏุฉ
- ุฒุฑ "ูุณูุช ูููุฉ ุงููุฑูุฑุ" ููุฌู **ูุจุงุดุฑุฉ** ูุตูุญุฉ `/admin/reset-password`
- ุชุจุณูุท ุงูููุฏ ูุฅุฒุงูุฉ ุงููุธุงุฆู ุบูุฑ ุงููุณุชุฎุฏูุฉ

---

## ๐ ุงูุฃูุงู

### ุงูุชุญูู ูู ุงููููุฉ
1. **ูู ุงููุงุฌูุฉ ุงูุฃูุงููุฉ (Frontend)**:
   - ูุชู ุชุณุฌูู ุงูุฏุฎูู ุจูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
   - ูุชู ุฅุนุงุฏุฉ ุงููุตุงุฏูุฉ (re-authentication) ููุชุฃูุฏ

2. **ูู ุงูุฎุงุฏู (Backend)**:
   - ุงูุชุญูู ูู session cookie
   - ุงูุชุญูู ูู ุฃู ุงููุณุชุฎุฏู admin
   - ุงูุชุญูู ูู ุชุทุงุจู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

### ุฅูููู ุงูุชุฃููุฏ
ุจุนุฏ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ ุจูุฌุงุญุ ูุชู ุฅุฑุณุงู ุฅูููู ูุญุชูู ุนูู:
- โ ุชุฃููุฏ ูุฌุงุญ ุงูุนูููุฉ
- ๐ง ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุงููุณุชุฎุฏู
- ๐ ุงูุชุงุฑูุฎ ูุงูููุช
- โ๏ธ ุชูุจูู ุฅุฐุง ูู ููู ุงููุณุชุฎุฏู ูู ูุงู ุจูุฐุง ุงูุชุบููุฑ

---

## ๐งช ุงูุงุฎุชุจุงุฑ

### 1. ุงูุชุญ ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
```
http://localhost:3000/admin/login
```

### 2. ุงุถุบุท "ูุณูุช ูููุฉ ุงููุฑูุฑุ"

### 3. ูู ุตูุญุฉ ุชุบููุฑ ูููุฉ ุงููุฑูุฑ
```
ุงูุจุฑูุฏ ุงูุฅููุชุฑููู: admin@sabstore.com
ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ: [ูููุฉ ุงููุฑูุฑ ุงููุฏููุฉ]
ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ: [ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ]
ุชุฃููุฏ ูููุฉ ุงููุฑูุฑ: [ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ]
```

### 4. ุงุถุบุท "ุชุบููุฑ ูููุฉ ุงููุฑูุฑ"

### 5. ุงููุชูุฌุฉ ุงููุชููุนุฉ
- โ ุฑุณุงูุฉ ูุฌุงุญ
- โ ุฅูููู ุชุฃููุฏ ูุตู ููุจุฑูุฏ
- โ ุชูุฌูู ุชููุงุฆู ูุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู
- โ ูููู ุชุณุฌูู ุงูุฏุฎูู ุจูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ

---

## โ๏ธ ุฑุณุงุฆู ุงูุฎุทุฃ ุงููุญุชููุฉ

| ุงูุฎุทุฃ | ุงูุณุจุจ | ุงูุญู |
|-------|-------|------|
| "ูููุฉ ุงููุฑูุฑ ุงููุฏููุฉ ุฎุงุทุฆุฉ" | ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ ุบูุฑ ุตุญูุญุฉ | ุชุฃูุฏ ูู ุฅุฏุฎุงู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ ุงูุตุญูุญุฉ |
| "ูููุงุช ุงููุฑูุฑ ุบูุฑ ูุชุทุงุจูุฉ" | ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ ูุชุฃููุฏูุง ูุฎุชููุงู | ุชุฃูุฏ ูู ูุชุงุจุฉ ููุณ ูููุฉ ุงููุฑูุฑ ูู ุงูุญูููู |
| "ูููุฉ ุงููุฑูุฑ ูุฌุจ ุฃู ุชููู 6 ุฃุญุฑู ุนูู ุงูุฃูู" | ูููุฉ ุงููุฑูุฑ ูุตูุฑุฉ ุฌุฏุงู | ุงุณุชุฎุฏู 6 ุฃุญุฑู ุนูู ุงูุฃูู |
| "ูููุฉ ุงููุฑูุฑ ุงูุฌุฏูุฏุฉ ูุฌุจ ุฃู ุชููู ูุฎุชููุฉ" | ููุณ ูููุฉ ุงููุฑูุฑ ุงููุฏููุฉ | ุงุณุชุฎุฏู ูููุฉ ูุฑูุฑ ุฌุฏูุฏุฉ ูุฎุชููุฉ |
| "ุงููุณุชุฎุฏู ุบูุฑ ููุฌูุฏ" | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ุบูุฑ ูุณุฌู | ุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู |
| "ุบูุฑ ูุตุฑุญ" | ูุณุช ูุณุฌู ุฏุฎูู | ุณุฌู ุฏุฎูู ุฃููุงู |

---

## ๐ก ุงููุฒุงูุง

### 1. ุณุฑุนุฉ ุฃูุจุฑ โก
- ูุง ุญุงุฌุฉ ูุงูุชุธุงุฑ ูุตูู ุงูุฅูููู
- ุงูุชุบููุฑ ูุชู **ููุฑุงู**

### 2. ุฃูุงู ุฃุนูู ๐
- ุงูุชุญูู ูู ุงููููุฉ ุจุงุณุชุฎุฏุงู ูููุฉ ุงููุฑูุฑ ุงูุญุงููุฉ
- ูุง ุฑูุงุจุท ูุฏ ุชูุณุฑู ุฃู ุชูุชูู ุตูุงุญูุชูุง

### 3. ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู ๐
- ูุงุฌูุฉ ุจุณูุทุฉ ููุงุถุญุฉ
- ุฑุณุงุฆู ุฎุทุฃ ูููููุฉ
- ูุง ุชุนููุฏุงุช

### 4. ููุซูููุฉ ุฃุนูู โ
- ูุง ูุดุงูู ูุน ุนุฏู ูุตูู ุงูุฅููููุงุช
- ูุนูู ุฏุงุฆูุงู ุจุฏูู ุงุนุชูุงุฏ ุนูู ุฎุฏูุฉ ุงูุจุฑูุฏ

---

## ๐ ููุงุญุธุงุช ุชูููุฉ

### Dependencies ุงููุถุงูุฉ
```json
{
  "cookie": "^0.6.0",
  "@types/cookie": "^0.6.0"
}
```

### Firebase Admin SDK
ูุชู ุงุณุชุฎุฏุงูู ูุชุบููุฑ ูููุฉ ุงููุฑูุฑ:
```typescript
await adminAuth.updateUser(uid, {
  password: newPassword,
});
```

### Session Management
- ูุชู ุงูุชุญูู ูู session cookie ูู ุงูู API
- ูุชู ุงูุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู admin ูุจู ุงูุณูุงุญ ุจุงูุชุบููุฑ

---

## ๐ ุงูุฎูุงุตุฉ

**ูุจู**:
- โ ุฅุฑุณุงู ุฑุงุจุท ุนุจุฑ ุงูุจุฑูุฏ
- โ ุงูุฅูููู ูุฏ ูุง ูุตู
- โ ุงูุงูุชุธุงุฑ ูุงูุชุนููุฏ
- โ ุฑูุงุจุท ุชูุชูู ุตูุงุญูุชูุง

**ุจุนุฏ**:
- โ ุชุบููุฑ ูุจุงุดุฑ ูู ุงูุชุทุจูู
- โ ุณุฑูุน ูููุฑู
- โ ุขูู ููุญูู
- โ ุจุณูุท ูุณูู ุงูุงุณุชุฎุฏุงู
- โ ุฅูููู ุชุฃููุฏ ููุท (ุงุฎุชูุงุฑู)

---

## ๐ ุงููุณุงุนุฏุฉ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู console ูู ุงููุชุตูุญ (F12)
2. ุชุญูู ูู logs ูู Terminal
3. ุชุฃูุฏ ูู ุฃู Firebase Admin SDK ูุนุฏ ุจุดูู ุตุญูุญ
4. ุชุฃูุฏ ูู ุฃู ุงููุณุชุฎุฏู admin ูู Firebase Authentication

---

**ุชู ุจูุฌุงุญ! โจ**

ุงููุธุงู ุงูุขู ุฃุจุณุทุ ุฃุณุฑุนุ ูุฃูุซุฑ ููุซูููุฉ ูู ูุจู!
